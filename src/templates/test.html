{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Exercises</title>
    <link rel="stylesheet" href="{% static 'css/test_comp.css' %}">
    
</head>
<body>
{{ room_name|json_script:"room-name" }}
<h1>{{request.user.participant}}</h1>
<div class="exercise-container">

    {% for question in questions %}
    
        <div class="exercise-section">
            <div class="exercise-header">{{question.points}} points : {{question.title}}</div>
            <div class="exercise-content">
                <p>{{question.text}}</p>
                <pre><code>{{question.template}}</code></pre>
                <div class="submit-form">
                    <h3>Submit Your Solution</h3>
                    <form action="/submit" method="post" enctype="multipart/form-data">
                        {% csrf_token %}  
                        {{ from.as_p }}
                        <input type="hidden" name="question_id" value="{{question.id}}">
                        <button type="button" class="submit-button">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    {% endfor %}
    


</div>



<script src="{% static 'js/ws_conn.js' %}"></script>
<script>
    // Add JavaScript to handle accordion behavior
    document.addEventListener("DOMContentLoaded", function () {
        const sections = document.querySelectorAll('.exercise-section');

        sections.forEach(section => {
            const header = section.querySelector('.exercise-header');
            const content = section.querySelector('.exercise-content');

            header.addEventListener('click', function () {
                content.style.display = (content.style.display === 'none' || content.style.display === '') ? 'block' : 'none';
            });
        });
    });
</script>
</body>
</html>
